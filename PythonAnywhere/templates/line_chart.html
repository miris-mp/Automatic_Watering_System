<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Chart.js Example</title>
    <!-- import plugin script -->
    <script src='static/Chart.min.js'></script>
  </head>
  <body style="background:#2e2e2e;color:white;font-family:verdana">
    <div style="display: inline">
        <div id="temp-plant-basil" style="width:100%;height:400px;padding-bottom:50px">
            <h1>Temperature Sensor Basil</h1>
            <!-- bar chart canvas element -->
            <div class="chart-wrapper" style="height: 100%; width: 100%">
                <canvas id="myChartBasilTemp"></canvas>
            </div>
            <!--<p id="pointSelected">Point selected:</p>-->

            <script>
              // Global parameters:
              // do not resize the chart canvas when its container does (keep at 600x400px)
              Chart.defaults.global.responsive = false;

              // define the chart data
              var chartData = {
                labels : [{% for item in labels_plant_1 %}
                           "{{item}}",
                          {% endfor %}],
                datasets : [{
                    label: '{{ t_legend_plant_1 }}',
                    fill: true,
                    lineTension: 0.1,
                    color: "#a8a8a8",
                    backgroundColor: "rgba(201, 93, 93,0.4)",
                    borderColor: "rgba(201, 93, 93,1)",
                    borderCapStyle: 'butt',
                    borderDash: [],
                    borderDashOffset: 0.0,
                    borderJoinStyle: 'miter',
                    pointBorderColor: "rgba(201, 93, 93,1)",
                    pointBackgroundColor: "#fff",
                    pointBorderWidth: 1,
                    pointHoverRadius: 5,
                    pointHoverBackgroundColor: "rgba(201, 93, 93,1)",
                    pointHoverBorderColor: "rgba(220,220,220,1)",
                    pointHoverBorderWidth: 2,
                    pointRadius: 1,
                    pointHitRadius: 10,
                    data : [{% for item in t_values_plant_1 %}
                              {{item}},
                            {% endfor %}],
                    spanGaps: false
                }]
              }

              // get chart canvas
              var holder = document.getElementById("myChartBasilTemp");
              var ctx = document.getElementById("myChartBasilTemp").getContext("2d");

              // create the chart using the chart canvas
              var myChartBasilTemp = new Chart(ctx, {
                type: 'line',
                data: chartData,
                options: {
                  responsive: true,
                  maintainAspectRatio: false,
                  tooltips: {
                    enabled: true,
                    mode: 'single',
                    callbacks: {
                      label: function(tooltipItems, data) {
                               return tooltipItems.yLabel + ' degrees';
                             }
                    }
                  },
                }
              });

              // get the text element below the chart
              var pointSelected = document.getElementById("pointSelected");

              // create a callback function for updating the selected index on the chart
              holder.onclick = function(evt){
                var activePoint = myChartBasilTemp.getElementAtEvent(evt);
                console.log(activePoint);
                console.log('x:' + activePoint[0]._view.x);
                console.log('maxWidth: ' + activePoint[0]._xScale.maxWidth);
                console.log('y: ' + activePoint[0]._view.y);
                console.log('index: ' + activePoint[0]._index);
                pointSelected.innerHTML = 'Point selected... index: ' + activePoint[0]._index;
              };
            </script>
        </div>

        <div id="moist-plant-basil" style="width:100%;height:400px;padding-bottom:50px">
            <h1>Moisture Sensor Basil</h1>
            <!-- bar chart canvas element -->
            <div class="chart-wrapper" style="height: 100%; width: 100%">
                <canvas id="myChartBasilMoist"></canvas>
            </div>
            <!--<p id="pointSelected">Point selected:</p>-->

            <script>
              // define the chart data
              var chartData = {
                labels : [{% for item in labels_plant_1 %}
                           "{{item}}",
                          {% endfor %}],
                datasets : [{
                    label: '{{ m_legend_plant_1 }}',
                    fill: true,
                    lineTension: 0.1,
                    backgroundColor: "rgba(75,192,192,0.4)",
                    borderColor: "rgba(75,192,192,1)",
                    borderCapStyle: 'butt',
                    borderDash: [],
                    borderDashOffset: 0.0,
                    borderJoinStyle: 'miter',
                    pointBorderColor: "rgba(75,192,192,1)",
                    pointBackgroundColor: "#fff",
                    pointBorderWidth: 1,
                    pointHoverRadius: 5,
                    pointHoverBackgroundColor: "rgba(75,192,192,1)",
                    pointHoverBorderColor: "rgba(220,220,220,1)",
                    pointHoverBorderWidth: 2,
                    pointRadius: 1,
                    pointHitRadius: 10,
                    data : [{% for item in m_values_plant_1 %}
                              {{item}},
                            {% endfor %}],
                    spanGaps: false
                }]
              }

              // get chart canvas
              var holder = document.getElementById("myChartBasilMoist");
              var ctx = document.getElementById("myChartBasilMoist").getContext("2d");

              // create the chart using the chart canvas
              var myChartBasilMoist = new Chart(ctx, {
                type: 'line',
                data: chartData,
                options: {
                  responsive: true,
                  maintainAspectRatio: false,
                  tooltips: {
                    enabled: true,
                    mode: 'single',
                    callbacks: {
                      label: function(tooltipItems, data) {
                               return tooltipItems.yLabel + '%';
                             }
                    }
                  },
                }
              });

              // get the text element below the chart
              var pointSelected = document.getElementById("pointSelected");

              // create a callback function for updating the selected index on the chart
              holder.onclick = function(evt){
                var activePoint = myChartBasilMoist.getElementAtEvent(evt);
                console.log(activePoint);
                console.log('x:' + activePoint[0]._view.x);
                console.log('maxWidth: ' + activePoint[0]._xScale.maxWidth);
                console.log('y: ' + activePoint[0]._view.y);
                console.log('index: ' + activePoint[0]._index);
                pointSelected.innerHTML = 'Point selected... index: ' + activePoint[0]._index;
              };
            </script>
        </div>

        <div id="temp-plant-peppermint" style="width:100%;height:400px;padding-bottom:50px">
            <h1>Temperature Sensor Peppermint</h1>
            <!-- bar chart canvas element -->
            <div class="chart-wrapper" style="height: 100%; width: 100%">
                <canvas id="myChartPeppermintTemp"></canvas>
            </div>
            <!--<p id="pointSelected">Point selected:</p>-->

            <script>
              // define the chart data
              var chartData = {
                labels : [{% for item in labels_plant_2 %}
                           "{{item}}",
                          {% endfor %}],
                datasets : [{
                    label: '{{ t_legend_plant_2 }}',
                    fill: true,
                    lineTension: 0.1,
                    backgroundColor: "rgba(191, 237, 97,0.4)",
                    borderColor: "rgba(191, 237, 97,1)",
                    borderCapStyle: 'butt',
                    borderDash: [],
                    borderDashOffset: 0.0,
                    borderJoinStyle: 'miter',
                    pointBorderColor: "rgba(191, 237, 97,1)",
                    pointBackgroundColor: "#fff",
                    pointBorderWidth: 1,
                    pointHoverRadius: 5,
                    pointHoverBackgroundColor: "rgba(191, 237, 97,1)",
                    pointHoverBorderColor: "rgba(220,220,220,1)",
                    pointHoverBorderWidth: 2,
                    pointRadius: 1,
                    pointHitRadius: 10,
                    data : [{% for item in t_values_plant_2 %}
                              {{item}},
                            {% endfor %}],
                    spanGaps: false
                }]
              }

              // get chart canvas
              var holder = document.getElementById("myChartPeppermintTemp");
              var ctx = document.getElementById("myChartPeppermintTemp").getContext("2d");

              // create the chart using the chart canvas
              var myChartPeppermintTemp = new Chart(ctx, {
                type: 'line',
                data: chartData,
                options: {
                  responsive: true,
                  maintainAspectRatio: false,
                  tooltips: {
                    enabled: true,
                    mode: 'single',
                    callbacks: {
                      label: function(tooltipItems, data) {
                               return tooltipItems.yLabel + ' degrees';
                             }
                    }
                  },
                }
              });

              // get the text element below the chart
              var pointSelected = document.getElementById("pointSelected");

              // create a callback function for updating the selected index on the chart
              holder.onclick = function(evt){
                var activePoint = myChartPeppermintTemp.getElementAtEvent(evt);
                console.log(activePoint);
                console.log('x:' + activePoint[0]._view.x);
                console.log('maxWidth: ' + activePoint[0]._xScale.maxWidth);
                console.log('y: ' + activePoint[0]._view.y);
                console.log('index: ' + activePoint[0]._index);
                pointSelected.innerHTML = 'Point selected... index: ' + activePoint[0]._index;
              };
            </script>
        </div>

        <div id="moisr-plant-peppermint" style="width:100%;height:400px;padding-bottom:50px">
            <h1>Moisture Sensor Peppermint</h1>
            <!-- bar chart canvas element -->
            <div class="chart-wrapper" style="height: 100%; width: 100%">
                <canvas id="myChartPeppermintMoist"></canvas>
            </div>
            <!--<p id="pointSelected">Point selected:</p>-->

            <script>
              // define the chart data
              var chartData = {
                labels : [{% for item in labels_plant_2 %}
                           "{{item}}",
                          {% endfor %}],
                datasets : [{
                    label: '{{ m_legend_plant_2 }}',
                    fill: true,
                    lineTension: 0.1,
                    backgroundColor: "rgba(203, 141, 227,0.4)",
                    borderColor: "rgba(203, 141, 227,1)",
                    borderCapStyle: 'butt',
                    borderDash: [],
                    borderDashOffset: 0.0,
                    borderJoinStyle: 'miter',
                    pointBorderColor: "rgba(203, 141, 227,1)",
                    pointBackgroundColor: "#fff",
                    pointBorderWidth: 1,
                    pointHoverRadius: 5,
                    pointHoverBackgroundColor: "rgba(203, 141, 227,1)",
                    pointHoverBorderColor: "rgba(220,220,220,1)",
                    pointHoverBorderWidth: 2,
                    pointRadius: 1,
                    pointHitRadius: 10,
                    data : [{% for item in m_values_plant_1 %}
                              {{item}},
                            {% endfor %}],
                    spanGaps: false
                }]
              }

              // get chart canvas
              var holder = document.getElementById("myChartPeppermintMoist");
              var ctx = document.getElementById("myChartPeppermintMoist").getContext("2d");

              // create the chart using the chart canvas
              var myChartPeppermintMoist = new Chart(ctx, {
                type: 'line',
                data: chartData,
                options: {
                  responsive: true,
                  maintainAspectRatio: false,
                  tooltips: {
                    enabled: true,
                    mode: 'single',
                    callbacks: {
                      label: function(tooltipItems, data) {
                               return tooltipItems.yLabel + '%';
                             }
                    }
                  },
                }
              });

              // get the text element below the chart
              var pointSelected = document.getElementById("pointSelected");

              // create a callback function for updating the selected index on the chart
              holder.onclick = function(evt){
                var activePoint = myChartPeppermintMoist.getElementAtEvent(evt);
                console.log(activePoint);
                console.log('x:' + activePoint[0]._view.x);
                console.log('maxWidth: ' + activePoint[0]._xScale.maxWidth);
                console.log('y: ' + activePoint[0]._view.y);
                console.log('index: ' + activePoint[0]._index);
                pointSelected.innerHTML = 'Point selected... index: ' + activePoint[0]._index;
              };
            </script>
        </div>
    </div>
  </body>
</html>

